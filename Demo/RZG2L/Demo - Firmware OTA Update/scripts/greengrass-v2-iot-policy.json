{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "passRoleForResources",
            "Effect": "Allow",
            "Action": "iam:PassRole",
            "Resource": "*",
            "Condition": {
                "StringEquals": {
                    "iam:PassedToService": [
                        "iot.amazonaws.com",
                        "lambda.amazonaws.com",
                        "greengrass.amazonaws.com"
                    ]
                }
            }
        },
        {
            "Sid": "lambdaResources",
            "Effect": "Allow",
            "Action": [
                "lambda:CreateFunction",
                "lambda:PublishVersion",
                "lambda:DeleteFunction",
                "execute-api:Invoke",
                "lambda:GetFunction"
            ],
            "Resource": [
                "*"
            ]
        },
        {
            "Sid": "iotResources",
            "Effect": "Allow",
            "Action": [
                "iot:CreateThing",
                "iot:DeleteThing",
                "iot:DescribeThing",
                "iot:CreateThingGroup",
                "iot:DeleteThingGroup",
                "iot:DescribeThingGroup",
                "iot:AddThingToThingGroup",
                "iot:RemoveThingFromThingGroup",
                "iot:AttachThingPrincipal",
                "iot:DetachThingPrincipal",
                "iot:UpdateCertificate",
                "iot:DeleteCertificate",
                "iot:CreatePolicy",
                "iot:AttachPolicy",
                "iot:DetachPolicy",
                "iot:DeletePolicy",
                "iot:GetPolicy",
                "iot:Publish",
                "iot:TagResource",
                "iot:ListThingPrincipals",
                "iot:ListAttachedPolicies",
                "iot:ListTargetsForPolicy",
                "iot:ListThingGroupsForThing",
                "iot:ListThingsInThingGroup",
                "iot:CreateJob",
                "iot:DescribeJob",
                "iot:DescribeJobExecution",
                "iot:DeleteJob",
                "iot:CancelJob",
                "iot:DescribeCertificate",
                "iot:DescribeEndpoint",
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:DescribeLogStreams",
                "iot:Connect",
                "iot:Publish",
                "iot:Subscribe",
                "iot:Receive",
                "iot:ListThingPrincipals",
                "iot:GetThingShadow",
                "iot:UpdateThingShadow",
                "s3:GetBucketLocation",
                "s3:GetObject",
                "s3:PutObject",
                "s3:AbortMultipartUpload",
                "s3:ListMultipartUploadParts"
            ],
            "Resource": [
                "*"
            ]
        },
        {
            "Sid": "s3Resources",
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObjectVersion",
                "s3:DeleteObject",
                "s3:CreateBucket",
                "s3:ListBucket",
                "s3:ListBucketVersions",
                "s3:DeleteBucket",
                "s3:PutObjectTagging",
                "s3:PutBucketTagging"
            ],
            "Resource": [
                "*"
            ]
        },
        {
            "Sid": "roleAliasResources",
            "Effect": "Allow",
            "Action": [
                "iot:CreateRoleAlias",
                "iot:DescribeRoleAlias",
                "iot:DeleteRoleAlias",
                "iot:TagResource",
                "iam:GetRole"
            ],
            "Resource": [
                "*"
            ]
        },
        {
            "Sid": "idtExecuteAndCollectMetrics",
            "Effect": "Allow",
            "Action": [
                "iot-device-tester:SendMetrics",
                "iot-device-tester:SupportedVersion",
                "iot-device-tester:LatestIdt",
                "iot-device-tester:CheckVersion",
                "iot-device-tester:DownloadTestSuite"
            ],
            "Resource": "*"
        },
        {
            "Sid": "genericResources",
            "Effect": "Allow",
            "Action": [
                "greengrass:*",
                "iot:GetThingShadow",
                "iot:UpdateThingShadow",
                "iot:ListThings",
                "iot:DescribeEndpoint",
                "iot:CreateKeysAndCertificate",
                "iot:CreateCertificateFromCsr"
            ],
            "Resource": "*"
        },
        {
            "Sid": "iamResourcesUpdate",
            "Effect": "Allow",
            "Action": [
                "iam:CreateRole",
                "iam:DeleteRole",
                "iam:CreatePolicy",
                "iam:DeletePolicy",
                "iam:AttachRolePolicy",
                "iam:DetachRolePolicy",
                "iam:TagRole",
                "iam:TagPolicy",
                "iam:GetPolicy",
                "iam:ListAttachedRolePolicies",
                "iam:ListEntitiesForPolicy"
            ],
            "Resource": [
                "*"
            ]
        }
    ]
}
